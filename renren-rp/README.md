rrrp.sh
===

# Introduction
shell编写的人人网自动攒RP脚本。可模拟每天一次的点击“攒”按钮攒RP，和每30分钟刷新页面攒RP。

# Dependencies
软件版本是测试时用的，其它版本没测过，如果有问题欢迎报告。
`curl 7.22.0`
`GNU bash 4.2.25(1)`
`GNU grep 2.10`
`GUN sed version 4.2.1`

# Usage
    rrrp.sh username password period
`username`: 登录用户名
`password`: 登录密码
`period`: 执行刷新页面操作的周期。这个值用于指定运行多少次脚本才真正执行一次刷新页面请求。比如值为31时，会在第0，31，62……次执行脚本时发送刷新请求，其它时候不刷新。这样设计的主要原因是cron坑爹的定时执行规则要求定时周期必须能整除60，否则最后一个周期会被切短，强制在第60单位时间点执行。而通常为了避免网络延时的影响，定时周期应该比30分钟略大一些（比如设置为31分钟）。所以如果使用cron来挂脚本的话，可以让这个值取31，然后cron每1分钟执行一次脚本。

例如，假设脚本的路径是`/path/to/script/rrrp.sh`，可以在crontab中加一条:
    */1 * * * * cd /path/to/script/ && ./rrrp.sh username password 31 >> err.log 2>&1
这样脚本会每分钟执行一次，但是实际上每31分钟发送一次刷新请求。这么做是为了防止刷新太快之类的（虽然目前看没啥后果，也可以设成每1分钟刷新一次的）。
另外，脚本会在每天第一次运行时尝试模拟点击“攒”按钮的操作。如果因为网络错误等原因没成功，会在下一次运行时再试。如果模拟成功，或者网站返回结果是当天的“攒”已经被点过了，那么当就不会再尝试。

脚本运行后会在当前目录下生成一些配置文件，请勿删除：
`rrrp.cfg`: 配置文件，记录执行周期和上一次点攒的日期。
`rrrp.cookie`: 登录成功后的cookie。保持这个文件可以减少模拟登录的次数，避免因为登录频繁而被要求输验证码。脚本现在还不能自动填验证码，发生这种情况就只能停用一段时间，等不需要输入验证码了再运行。
以下几个是临时文件，可以在脚本每次执行完后删除：
`lastpage.html`: 接收的人人网首页。
`lastcollectrp.js`: 接收的点击”攒“结果消息。
`header_refresh.log`, `header_collectrp.log`: 接收的HTTP消息头。

# TODO
模拟：解锁成就之后分享，获得额外点”攒“机会。

# Changlog
2014-01-11: First version.

